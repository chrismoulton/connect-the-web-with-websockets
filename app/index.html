<head>
  <script type="text/javascript" src='/socket.io/socket.io.js'>
  </script>
  <script type="text/javascript">
    var socket = io.connect('http://localhost',{'forceNew': true});
    socket.on('messages', function (data) {
      console.log(data);
      //socket.emit('my other event', { my: 'data' });
    });

    function addMessage(e){

      var payload = {
        content:{
          text:document.getElementById("message").value,
        },
        sender:document.getElementById("username").value,
        ts:Date.now()
      };

      console.info("adding message",payload);
      socket.emit("new-message",payload)

      return false;
    }
  </script>
</head>
<body>
  <h1>
    Socket.io App
  </h1>
  <form class="" onsubmit="return addMessage(this)">
      <!-- <button type="submit" name="button">Add a new message</button> -->
      <div class="username">
          <input type="text" id=username placeholder="Your name" value=Guest required>
      </div>
      <div class="message">
        <input type="text" id="message" placeholder="Enter a message" value="" required>
      </div>
      <input type="submit" name="name" value="Submit">
  </form>
</body>
